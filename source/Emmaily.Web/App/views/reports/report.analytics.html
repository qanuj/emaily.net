<div class="page-bar">
    <div ng-include="'App/views/layout/bread-save.html'"></div>
    <div class="page-toolbar">
        <div class="control-group">
            <ui-select ng-model="search.ChannelID" title="Choose a Channel...">
                <ui-select-match>{{$select.selected.Title}}</ui-select-match>
                <ui-select-choices repeat="channel.ID as channel in channels | propsFilter: {Title: $select.search}">
                    <div ng-bind-html="channel.Title | highlight: $select.search"></div>
                </ui-select-choices>
            </ui-select>
        </div>
        <div class="control-group">
            <ui-select ng-model="search.ContentID" reset-search-input="false" title="Choose an programme">
                <ui-select-match allow-clear="true" placeholder="Choose an programme...">{{$select.selected.Title}}</ui-select-match>
                <ui-select-choices repeat="c.ID as c in intellects track by $index" refresh="refreshIntellect($select.search)" refresh-delay="0">
                    <span class="title" ng-bind-html="c.Title | highlight: $select.search"></span>
                    <span class="pull-right"><i>{{c.IpType}}</i></span>
                    <br />{{c.Client}}
                </ui-select-choices>
            </ui-select>
        </div>
        <div class="btn-group">
            <div class="btn default" date-range-picker options="daterangeOptions"
                 ng-model="search.date">
                <i class="fa fa-calendar"></i>
                <span>{{search.date.startDate |  amFormat:'MMMM D, YYYY'}} to {{search.date.endDate |  amFormat:'MMMM D, YYYY'}}</span>
                <b class="fa fa-angle-down"></b>
            </div>
        </div>
    </div>
</div>
<div class="clearfix margin-bottom-30"></div>
<div fill-height debounce-wait="400" footer-element-id="page-footer" class="scroller" slimscroll>
    <div class="row">
        <div class="col-md-3 col-lg-4">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-line-chart font-red-sunglo"></i>
                        <span class="caption-subject font-red-sunglo bold uppercase">Time Statistics</span>
                        <span class="caption-helper">{{search.date.startDate |  amFormat:'MMMM D, YYYY'}} to {{search.date.endDate |  amFormat:'MMMM D, YYYY'}}</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <canvas class="chart chart-scatter" 
                            chart-options="timeChartOptions" 
                            chart-data="dataTime"  
                            chart-labels="dataTime" 
                            chart-legend="true" chart-click="onClick"></canvas>
                </div>
            </div>
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-line-chart font-red-sunglo"></i>
                        <span class="caption-subject font-red-sunglo bold uppercase">Top Videos</span>
                        <span class="caption-helper">{{search.date.startDate |  amFormat:'MMMM D, YYYY'}} to {{search.date.endDate |  amFormat:'MMMM D, YYYY'}}</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <table class="table table-striped table-hover">
                        <tbody>
                            <tr ng-repeat="video in topvideos">
                                <td><a href="#" class="btn btn-info btn-icon-only" ng-click="play(video)"><i class="fa fa-play"></i></a></td>
                                <td><a href="#" ng-click="search.ContentID=video.ID">{{video.Title}}</a></td>
                                <td data-bind="text:Views">{{video.Views}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <div class="col-md-9 col-lg-8">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-line-chart font-red-sunglo"></i>
                        <span class="caption-subject font-red-sunglo bold uppercase">Viewer Statistics</span>
                        <span class="caption-helper">{{search.date.startDate |  amFormat:'MMMM D, YYYY'}} to {{search.date.endDate |  amFormat:'MMMM D, YYYY'}}</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <canvas class="chart chart-scatter" chart-options="viewChartOptions" chart-data="data" chart-legend="true" chart-click="onClick"></canvas>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat blue ">
                        <div class="visual">
                            <i class="fa fa-users"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.SessionPerViewer | number:2}}">{{current.SessionPerViewer | number:2}}</span>
                            </div>
                            <div class="desc"> Session / Viewer </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat red">
                        <div class="visual">
                            <i class="fa fa-angle-left"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.Sessions}}">{{totals.Sessions}}</span>
                            </div>
                            <div class="desc"> Sessions </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat green">
                        <div class="visual">
                            <i class="fa fa-film"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.Videos}}">{{totals.Videos}}</span>
                            </div>
                            <div class="desc"> Videos </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat purple">
                        <div class="visual">
                            <i class="fa fa-film"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.VideosPerSession | number:2}}">{{totals.VideosPerSession | number:2}}</span>
                            </div>
                            <div class="desc"> Videos / Session </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat blue">
                        <div class="visual">
                            <i class="fa fa-film"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.VideosPerViewer | number:2}}">{{totals.VideosPerViewer | number:2}}</span>
                            </div>
                            <div class="desc"> Videos / Viewer </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat red">
                        <div class="visual">
                            <i class="fa fa-users"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.Viewers}}">{{totals.Viewers}}</span>
                            </div>
                            <div class="desc">Viewers</div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat green">
                        <div class="visual">
                            <i class="fa fa-eye"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.Views}}">{{totals.Views}}</span>
                            </div>
                            <div class="desc"> Views </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat purple">
                        <div class="visual">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.Time}}">{{totals.Time | time}}</span>
                            </div>
                            <div class="desc"> Time </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat blue">
                        <div class="visual">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.TimePerSession}}">{{current.TimePerSession | time}}</span>
                            </div>
                            <div class="desc"> Time / Session </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <div class="dashboard-stat red">
                        <div class="visual">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="details">
                            <div class="number">
                                <span data-counter="counterup" data-value="{{totals.TimePerViewer}}">{{current.TimePerViewer | time}}</span>
                            </div>
                            <div class="desc"> Time / Viewer </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
